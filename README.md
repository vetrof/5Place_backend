# 5Place 
## Go | Python | Flutter | Postgres | Docker | Django | Minio | Chi 

![Banner](docs/banner.png)

Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞ¸
![Admin](docs/admin_interface.png)

---

## ğŸŒ Ğ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ 5Place

**5Place** â€” ÑÑ‚Ğ¾ open-source Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ´Ğ»Ñ Ñ‚ĞµÑ…, ĞºÑ‚Ğ¾ Ğ»ÑĞ±Ğ¸Ñ‚ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ğ¾Ğµ Ñ€ÑĞ´Ğ¾Ğ¼ Ñ ÑĞ¾Ğ±Ğ¾Ğ¹. ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ñ‚ÑƒÑ€Ğ¸ÑÑ‚Ğ°Ğ¼ Ğ¸ Ğ¶Ğ¸Ñ‚ĞµĞ»ÑĞ¼ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ° ÑƒĞ·Ğ½Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ± Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ñ‹Ñ… Ğ¸ Ğ¼Ğ°Ğ»Ğ¾Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ñ… Ğ¼ĞµÑÑ‚Ğ°Ñ… Ğ²Ğ¾ĞºÑ€ÑƒĞ³.

ğŸ“ **Ğ’Ñ‹ Ğ·Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚Ğµ â€” Ğ¸ ÑÑ€Ğ°Ğ·Ñƒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ 5 Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ñ‹Ñ… Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¹ Ñ€ÑĞ´Ğ¾Ğ¼ Ñ Ğ²Ğ°Ğ¼Ğ¸.**  
ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ ÑÑ‚Ñ€Ğ¾ÑÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸, Ğ° Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾:

- ğŸ“– Ğ¿Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¼ĞµÑÑ‚Ğ°,
- ğŸ“· Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ğ¸,
- ğŸ§ Ğ¿Ğ¾ÑĞ»ÑƒÑˆĞ°Ñ‚ÑŒ Ğ°ÑƒĞ´Ğ¸Ğ¾ Ğ¸Ğ»Ğ¸ ğŸ¥ Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ²Ğ¸Ğ´ĞµĞ¾Ñ€Ğ°ÑÑĞºĞ°Ğ· â€” Ğ½Ğ° Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ÑĞ·Ñ‹ĞºĞ°Ñ….

Ğ’ÑĞµ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ÑÑ **Ğ¸ÑĞºĞ»ÑÑ‡Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ»ÑĞ´ÑŒĞ¼Ğ¸** â€” Ğ½Ğ¸ĞºĞ°ĞºĞ¾Ğ³Ğ¾ AI-ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°. ĞœÑ‹ Ğ²ĞµÑ€Ğ¸Ğ¼, Ñ‡Ñ‚Ğ¾ Ğ½Ğ°ÑÑ‚Ğ¾ÑÑ‰Ğ¸Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑ ÑĞºÑ€Ñ‹Ñ‚ Ğ² Ğ´ĞµÑ‚Ğ°Ğ»ÑÑ…, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹ Ğ»Ğ¸ÑˆÑŒ Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ğ¼ Ğ¶Ğ¸Ñ‚ĞµĞ»ÑĞ¼ Ğ¸ Ğ¾Ğ¿Ñ‹Ñ‚Ğ½Ñ‹Ğ¼ Ğ³Ğ¸Ğ´Ğ°Ğ¼.

---

## ğŸ¤ ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ¾Ñ‚ Ğ»ÑĞ´ĞµĞ¹ Ğ´Ğ»Ñ Ğ»ÑĞ´ĞµĞ¹

- Ğ’ÑĞµ **Ñ„Ğ¾Ñ‚Ğ¾**, **Ñ‚ĞµĞºÑÑ‚Ñ‹**, **Ğ°ÑƒĞ´Ğ¸Ğ¾** Ğ¸ **Ğ²Ğ¸Ğ´ĞµĞ¾** ÑĞ´ĞµĞ»Ğ°Ğ½Ñ‹ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ.
- ĞœĞµÑÑ‚Ğ° Ğ¿Ğ¾Ğ´Ğ±Ğ¸Ñ€Ğ°ÑÑ‚ÑÑ **Ğ¿Ğ¾ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ³Ğ¸Ğ´Ğ¾Ğ² Ğ¸ Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ñ… Ğ·Ğ½Ğ°Ñ‚Ğ¾ĞºĞ¾Ğ²**.
- ĞœÑ‹ ÑÑ‚Ñ€ĞµĞ¼Ğ¸Ğ¼ÑÑ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ **ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğµ**, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ñ‡Ğ°ÑÑ‚Ğ¾ Ñ‚ĞµÑ€ÑÑÑ‚ÑÑ Ğ² ÑˆÑƒĞ¼Ğµ Ñ‚ÑƒÑ€Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ³Ğ¸Ğ³Ğ°Ğ½Ñ‚Ğ¾Ğ².

---

## ğŸ§­ Ğ‘ÑƒĞ´ÑƒÑ‰ĞµĞµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

- ğŸ“Œ ĞšÑƒÑ€Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ğ¿Ğ¾ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ°Ğ¼: Ğ¿Ğ°Ğ±Ñ‹, Ğ¿Ğ°Ğ¼ÑÑ‚Ğ½Ğ¸ĞºĞ¸, Ğ²Ğ¸Ğ´Ğ¾Ğ²Ñ‹Ğµ Ñ‚Ğ¾Ñ‡ĞºĞ¸, ÑĞºĞ²ĞµÑ€Ñ‹ Ğ¸ Ğ¼Ğ½Ğ¾Ğ³Ğ¾Ğµ Ğ´Ñ€ÑƒĞ³Ğ¾Ğµ.
- ğŸ—ºï¸ Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹ Ñ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ³Ğ¸Ğ´Ğ°Ğ¼Ğ¸.
- ğŸ§© Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ñ‹Ñ… Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¹, Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ Ğ¸ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ¾Ğ².

---

**ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ² Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ** Ğ¸ Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ ĞºĞ°Ğº **open-source** â€” Ğ¿Ñ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½ÑĞ¹Ñ‚ĞµÑÑŒ, ĞµÑĞ»Ğ¸ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ° Ğ±Ğ»Ğ¸Ğ¶Ğµ, Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½ĞµĞµ Ğ¸ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµÑ‡Ğ½ĞµĞµ.

---
---

### APP
ÑÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ (flutter)  https://github.com/vetrof/5place_flutter

### DB Diagram
![db](docs/db_diagram.png)

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```text
â”œâ”€â”€ admin
â”‚Â Â  â”œâ”€â”€ _settings
â”‚Â Â  â””â”€â”€ places
â”‚Â Â      â””â”€â”€ migrations
â”œâ”€â”€ cmd
â”œâ”€â”€ docs
â”œâ”€â”€ internal
â”‚Â Â  â”œâ”€â”€ place
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ handlers
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ repository
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ mocks
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ router
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â””â”€â”€ utils
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ gps
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ logger
â”‚Â Â  â”‚Â Â      â””â”€â”€ validator
â”‚Â Â  â””â”€â”€ user
â”‚Â Â      â””â”€â”€ router
â””â”€â”€ migrations

```


# ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ Dev Mode ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§

### ğŸ” ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ (`.env`)

env main project
```env main project
#REPO=fake

DB_HOST=localhost
DB_PORT=55000
DB_USER=postgres
DB_NAME=place5
DB_PASSWORD=postgrespw
DB_SCHEMA=public
PORT=8080

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production-12345
JWT_EXPIRATION_HOURS=24
```
env django admin
```env django admin
HOST=localhost:9000

DB_HOST=db
DB_PORT=5432
DB_USER=postgres
DB_NAME=place5
DB_PASSWORD=postgrespw
DB_SCHEMA=public

AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
AWS_STORAGE_BUCKET_NAME=5place-files
AWS_S3_ENDPOINT_URL=http://minio:9000
AWS_S3_FILE_OVERWRITE=False
AWS_S3_ADDRESSING_STYLE=path
AWS_DEFAULT_ACL=None
```

ĞµÑĞ»Ğ¸ Ğ² .env REPO=fake Ñ‚Ğ¾ Ğ±Ğ°Ğ·Ñƒ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ñ‚ÑŒ Ğ½ĞµĞ½ÑƒĞ¶Ğ½Ğ¾

---

### ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```bash
// Ğ·Ğ°Ğ¿ÑƒÑĞº ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
docker compose up --build -d
goose -dir migrations postgres "postgres://postgres:postgrespw@localhost:55000/place5?sslmode=disable&search_path=public" up

// Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞ¸
docker compose exec web python manage.py migrate
docker compose exec web python manage.py createsuperuser

// Ğ·Ğ°Ğ¿ÑƒÑĞº api
go run cmd/api/main.go
```
## Ğ”Ğ¶Ğ°Ğ½Ğ³Ğ¾ Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞ°
http://127.0.0.1:8000/admin

## ğŸ§  ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² IDE

```
jdbc:postgresql://localhost:55000/place5
```  

## Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ goose
```
go install github.com/pressly/goose/v3/cmd/goose@latest
goose -dir migrations create create_users_table sql
goose -dir migrations postgres "postgres://postgres:postgrespw@localhost:55000/place5?sslmode=disable&search_path=public" up
```

## Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ swagger
```json
swag init -g cmd/main.go       

```

---

## ğŸ§ª ĞĞ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ²

```$
PGPASSWORD=postgrespw psql -U postgres -h localhost -p 55000 -d place5 -f docs/init_data.sql

```

---
---

# ğŸ“ Public API

## swagger

http://localhost:8080/swagger/

```json
### api info
GET {{domain}}/

### health
GET {{domain}}/health

### auth/register
POST {{domain}}/auth/register
Content-Type: application/json

{
"username": "testuser",
"email": "test@example.com",
"password": "password123"
}

### auth/login
POST {{domain}}/auth/login
Content-Type: application/json

{
"email": "test@example.com",
"password": "password123"
}

### auth/profile
GET {{domain}}/auth/profile
Authorization: Bearer "token"

### countries
GET {{domain}}/api/v1/place/countries

### cities
GET {{domain}}/api/v1/place/cities/country/1

### near 5 places
GET {{domain}}/api/v1/place/places/near?long=71.408771&lat=51.162030&limit=5&radius=5000

### place detail
GET {{domain}}/api/v1/place/places/1

### random places
GET {{domain}}/api/v1/place/places/random

### random places country
GET {{domain}}/api/v1/place/places/random?country=1

### random places city
GET {{domain}}/api/v1/place/places/random?city=2

### places list in city
GET {{domain}}/api/v1/place/places/city/1

```


```
### all cities
GET {{domain}}/api/v1//place/cities
```
```json
{
  "data": [
    {
      "id": 1,
      "name": "Astana",
      "geom": "POINT(71.429745 51.128479)",
      "points": 2
    }
  ],
  "meta": {
    "count": 0,
    "limit": 0,
    "searchRadius": 0,
    "center": {
      "lat": 0,
      "lon": 0
    }
  }
}

```

```
### near 5 places
GET {{domain}}/api/v1//place/places/near?long=71.408771&lat=51.162030
```
```json
{
  "data": [
    {
      "id": 2,
      "cityName": "Astana",
      "name": "central park",
      "geom": "POINT(71.419953 51.154506)",
      "desc": "Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€Ğº ĞÑÑ‚Ğ°Ğ½Ñ‹",
      "distance": 1145.69542435,
      "photos": [
        "https://astana.citypass.kz/wp-content/uploads/7db97aa358c9dcf7b27cd405bceba5e3.jpeg"
      ]
    },
    {
      "id": 1,
      "cityName": "Astana",
      "name": "Independence Square",
      "geom": "POINT(71.429745 51.128479)",
      "desc": "Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ",
      "distance": 4010.78532212,
      "photos": [
        "https://media-cdn.tripadvisor.com/media/photo-s/0b/89/fb/fc/caption.jpg"
      ]
    }
  ],
  "meta": {
    "count": 2,
    "limit": 5,
    "searchRadius": 5000,
    "center": {
      "lat": 51.16203,
      "lon": 71.408771
    }
  }
}
```

```
### place detail
GET {{domain}}/api/v1//place/places/1
```
```json
{
  "data": [
    {
      "id": 1,
      "cityName": "Astana",
      "name": "Independence Square",
      "geom": "POINT(71.429745 51.128479)",
      "desc": "Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ",
      "distance": 0,
      "photos": null
    }
  ],
  "meta": {
    "count": 0,
    "limit": 0,
    "searchRadius": 0,
    "center": {
      "lat": 0,
      "lon": 0
    }
  }
}
```

```
### places list in city
GET {{domain}}/api/v1//place/places/city/1
```
```json
{
  "data": [
    {
      "id": 2,
      "cityName": "Astana",
      "name": "central park",
      "geom": "POINT(71.419953 51.154506)",
      "desc": "Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€Ğº ĞÑÑ‚Ğ°Ğ½Ñ‹",
      "distance": 0,
      "photos": null
    },
    {
      "id": 1,
      "cityName": "Astana",
      "name": "Independence Square",
      "geom": "POINT(71.429745 51.128479)",
      "desc": "Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ",
      "distance": 0,
      "photos": null
    }
  ],
  "meta": {
    "count": 0,
    "limit": 0,
    "searchRadius": 0,
    "center": {
      "lat": 0,
      "lon": 0
    }
  }
}
```



